# 在系统设计中定义功能需求

在编写设计文档时，我们通常以**用例**的形式捕获**功能需求**，每个用例描述了系统的一个或多个行为。

**示例：**当用户执行某操作时，系统会执行相应的反应。

在面试中，我们也基本上做同样的事情。作为候选人，我们的目标是确定系统的一到三个功能，并在接下来的面试中，仅关注这小部分用例。

如果我们足够幸运，面试官可能会为我们列举所有的功能。例如：

- **让我们设计一个类似 YouTube 的系统，特别是视频上传和视频观看功能。**

如果我们不那么幸运，我们可能只会听到问题陈述的第一部分：

- **让我们设计一个类似 YouTube 的系统。**

现在，我们的任务是尝试定义具体的功能。我们该如何做到这一点？让我与你分享一些实用的技巧。

## 定义功能的实用技巧

一般来说，要为一个系统定义功能需求，我们需要确定**谁将使用该系统以及如何使用**。

在面试中，对于我们熟悉和使用的系统，这相对容易做到。例如，当被要求设计如下系统时：

- YouTube
- Facebook
- Twitter
- 某个消息应用
- Google 的网络服务，如 Gmail

但对于我们知之甚少的系统，这可能相当困难——那些我们不直接交互的系统。例如：

- 限流系统
- 防欺诈系统
- 内容分发网络

对于此类系统，理解输入和输出是什么可能具有挑战性。

无论在哪种情况下，无论我们是否熟悉该系统，要定义功能需求，我们都应该**从客户开始，向后推导**。

## 从客户开始，向后推导

让我们尝试通过从**客户**开始来定义功能需求。我们确定客户的数量——这里的客户指的是我们需要设计的系统的用户或客户端。它们可以是：

- 人
- 数字设备
- 其他系统

顺便说一下，**向后推导**是亚马逊推广的一种产品开发方法。其理念是：

> 在开发产品之前，产品团队编写一份文档，清晰地定义问题、产品的目标客户，以及客户将如何从中受益。

所以，让我们与面试官澄清谁是客户。

### 示例：

- **YouTube**：
  - 上传视频的客户
  - 观看视频的客户
- **限流系统**：
  - 客户是其他系统，例如寻求过载保护的网络服务

## 理解客户如何使用系统

既然我们知道了客户是谁，我们需要澄清**他们如何使用系统**。

### 限流系统示例：

- 每次对网络服务发出请求时，网络服务都会调用限流系统，并接收是否应该处理该请求的响应。

### YouTube 示例：

- **内容创作者**：
  - 上传视频
  - 创建帖子
  - 查看分析数据
  - 以及更多
- **观看者**：
  - 搜索视频
  - 观看视频
  - 留下评论
  - 以及更多

每个这些功能本身就是一个独立的大型系统。面试官知道这一点，并会在我们询问时告诉我们应该关注哪些特定功能。

## 在面试中处理模糊性

如果你想知道为什么会有这些心理游戏——为什么面试官不能预先为候选人定义清晰的功能需求——你已经知道答案了。

- 面试官想看看我们如何**处理模糊性**，更具体地说，我们如何分析一个庞大而模糊的问题，以及如何通过将问题分解为可管理的部分来降低复杂性。

模糊性的程度取决于我们申请的职位级别：

- 对于**入门级职位**，我们应该预期零到最小的模糊性。
- 对于**高级职位**，我们应该预期问题陈述中有更多的模糊性。

## 将功能需求表达为 API

有时，这并不少见，面试官可能口头定义功能需求，并要求我们以**API**的形式表达这些需求，通常是**RPC**或**REST**。

例如，面试官定义了多个不同的用例，如一个列表，我们的任务是将列表转换为功能需求。然后，面试官会将这些用例转换为 REST API，如下所示。

有时，整个面试就是要：

- 确定功能需求
- 列出系统的关键功能
- 创建相应的 API

要做到这一点，我们需要了解**RPC 和 REST API 的指南和最佳实践**。所以要做好准备。我们在课程中有一个单独的章节涵盖了所有这些内容。

## 结论

定义功能需求是系统设计中的关键步骤，无论是在文档编写中还是在面试中。通过从客户开始，向后推导，我们可以有效地识别系统的关键功能。理解如何处理模糊性并将需求表达为 API 至关重要，特别是对于更高级别的职位。持续学习和准备 RPC 和 REST API 等主题将极大地帮助你在系统设计之旅中取得成功。
